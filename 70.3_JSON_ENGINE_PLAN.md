# 70.3 JSON Rules Engine - Simple & Science-Based

## 🎯 Vision
**Simple JSON rules that generate science-based 70.3 triathlon training plans.**

## 🎨 Design Language: Scandinavian Minimalist
**All UI components must follow our established design rules:**

### **🚫 NEVER Use:**
- **No Cards**: Eliminate card containers and frames
- **No Borders**: Remove all borders and frames
- **No Black Boxes**: No dark backgrounds or containers  
- **No Blue Buttons**: No blue primary buttons or CTAs
- **No Shadow Effects**: No box shadows or elevation
- **No Rounded Corners**: No excessive border radius

### **✅ ALWAYS Use:**
- **Typography**: Inter font family
- **Color Palette**: Black text on white background, gray (#666666) for secondary text
- **Button Design**: Text only, no icons, no emojis, minimal styling
- **Flat Design**: No shadows, no elevation, seamless flow
- **Professional**: Clean, uncluttered interface

## 🚫 Anti-Complexity Rules
1. **70.3-First Only** - No generic triathlon logic
2. **Science-Based Limits** - Hard boundaries, no AI optimization
3. **No "What If" Questions** - Build what works, not what could work
4. **Fail Fast** - No fallbacks, throw errors when data missing
5. **One Thing at a Time** - Perfect 70.3 before scaling
6. **Simple Validation** - Basic checks, no complex frameworks

## 📋 70.3-Specific JSON Rules

### Session Duration Limits
```json
{
  "distance": "seventy3",
  "sessionType": "swim",
  "maxDuration": 60,
  "targetZones": [2, 3]
}
```
```json
{
  "distance": "seventy3", 
  "sessionType": "bike",
  "maxDuration": 120,
  "targetZones": [2, 3]
}
```
```json
{
  "distance": "seventy3",
  "sessionType": "run", 
  "maxDuration": 90,
  "targetZones": [2, 3]
}
```
```json
{
  "distance": "seventy3",
  "sessionType": "brick",
  "maxDuration": 150,
  "targetZones": [3, 4]
}
```

### 80/20 Polarized Distribution
```json
{
  "distance": "seventy3",
  "philosophy": "polarized",
  "totalSessions": 6,
  "easySessions": 5,
  "hardSessions": 1
}
```

### Week Progression
```json
{
  "distance": "seventy3",
  "week": 1,
  "phase": "introduction",
  "sessionCount": 5,
  "intensity": "all_endurance"
}
```
```json
{
  "distance": "seventy3", 
  "week": 5,
  "phase": "build",
  "sessionCount": 6,
  "intensity": "introduce_threshold"
}
```

## 🔧 Implementation Steps

### Step 1: User Input Validation
```typescript
// Required baselines - NO FALLBACKS
const requiredBaselines = ['ftp', 'fiveKPace', 'swimPace100', 'age'];

if (!userBaselines.hasAll(requiredBaselines)) {
  throw new Error('Missing required baselines for 70.3 plan');
}
```

### Step 2: 70.3-Specific Plan Generation
```typescript
// Simple flow - no complexity
const plan = generate70_3Plan(userBaselines, weekNumber);
```

### Step 3: Science-Based Validation
```typescript
// Enforce 70.3 limits - no AI optimization
if (session.duration > seventy3Limits[session.type]) {
  throw new Error(`Session exceeds 70.3 ${session.type} limit`);
}
```

## 🎯 Expected Output

### Week 1 - Introduction
- **5 sessions, 8.0 hours**
- **All endurance sessions** (no threshold work)
- **Session durations:** Swim 45min, Bike 90min, Run 60min, Brick 120min
- **80/20 distribution:** 5 easy + 0 hard (all endurance for Week 1)

### Week 5 - Build
- **6 sessions, 10.0 hours** 
- **Introduce threshold work**
- **Session durations:** Swim 40min, Bike 100min, Run 75min, Brick 135min
- **80/20 distribution:** 5 easy + 1 hard

## 🚫 What We Won't Build
- ❌ Generic triathlon logic
- ❌ Complex time multipliers
- ❌ Fitness level adjustments
- ❌ Recovery capacity calculations
- ❌ Diminishing returns logic
- ❌ Comprehensive validation frameworks
- ❌ Auto-correction systems
- ❌ Confidence scoring
- ❌ Multiple training philosophies (start with polarized only)
- ❌ Complex strength integration (start with traditional only)

## ✅ What We Will Build
- ✅ 70.3-specific JSON rules
- ✅ Science-based duration limits
- ✅ Simple 80/20 distribution
- ✅ Week progression logic
- ✅ Basic validation
- ✅ Fail-fast error handling
- ✅ Polarized training only
- ✅ Traditional strength only

## 🎯 Success Criteria
1. **70.3 endurance sessions:** 60-120min (not 150-180min)
2. **70.3 threshold sessions:** 30-60min (not 90-120min)  
3. **70.3 brick sessions:** 120-150min (not 180-240min)
4. **80/20 distribution:** 5 easy + 1 hard (not 3+3)
5. **Week progression:** Introduction → Build → Peak → Taper
6. **No fallbacks:** Fail fast when data missing
7. **No hardcoding:** Everything from user input

## 🔄 Scaling Plan (After 70.3 Works)
1. **Perfect 70.3 plans first**
2. **Then add Olympic rules**
3. **Then add Sprint rules**
4. **Then add Ironman rules**
5. **Then add other training philosophies**
6. **Then add complex strength integration**

## 🎯 The Goal
**Simple JSON rules that generate coach-quality 70.3 triathlon plans without complexity or AI optimization addiction.** 